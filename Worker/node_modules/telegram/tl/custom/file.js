"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.File = void 0;
const api_1 = require("../api");
const Utils_1 = require("../../Utils");
class File {
    constructor(media) {
        this.media = media;
    }
    get id() {
        throw new Error("Unsupported");
    }
    get name() {
        return this._fromAttr(api_1.Api.DocumentAttributeFilename, 'fileName');
    }
    get mimeType() {
        if (this.media instanceof api_1.Api.Photo) {
            return 'image/jpeg';
        }
        else if (this.media instanceof api_1.Api.Document) {
            return this.media.mimeType;
        }
    }
    get width() {
        return this._fromAttr([
            api_1.Api.DocumentAttributeImageSize, api_1.Api.DocumentAttributeVideo
        ], 'w');
    }
    get height() {
        return this._fromAttr([
            api_1.Api.DocumentAttributeImageSize, api_1.Api.DocumentAttributeVideo
        ], 'h');
    }
    get duration() {
        return this._fromAttr([
            api_1.Api.DocumentAttributeAudio, api_1.Api.DocumentAttributeVideo
        ], 'duration');
    }
    get title() {
        return this._fromAttr(api_1.Api.DocumentAttributeAudio, 'title');
    }
    get performer() {
        return this._fromAttr(api_1.Api.DocumentAttributeAudio, 'performer');
    }
    get emoji() {
        return this._fromAttr(api_1.Api.DocumentAttributeSticker, 'alt');
    }
    get stickerSet() {
        return this._fromAttr(api_1.Api.DocumentAttributeSticker, 'stickerset');
    }
    get size() {
        if (this.media instanceof api_1.Api.Photo) {
            return Utils_1._photoSizeByteCount(this.media.sizes[-1]);
        }
        else if (this.media instanceof api_1.Api.Document) {
            return this.media.size;
        }
    }
    _fromAttr(cls, field) {
        if (this.media instanceof api_1.Api.Document) {
            for (const attr of this.media.attributes) {
                if (attr instanceof cls) {
                    return attr[field];
                }
            }
        }
    }
}
exports.File = File;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2dyYW1qcy90bC9jdXN0b20vZmlsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSxnQ0FBMkI7QUFDM0IsdUNBQWdEO0FBRWhELE1BQWEsSUFBSTtJQUdiLFlBQVksS0FBZTtRQUN2QixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztJQUN2QixDQUFDO0lBRUQsSUFBSSxFQUFFO1FBQ0YsTUFBTSxJQUFJLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBRUQsSUFBSSxJQUFJO1FBQ0osT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQUcsQ0FBQyx5QkFBeUIsRUFBRSxVQUFVLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBRUQsSUFBSSxRQUFRO1FBQ1IsSUFBSSxJQUFJLENBQUMsS0FBSyxZQUFZLFNBQUcsQ0FBQyxLQUFLLEVBQUU7WUFDakMsT0FBTyxZQUFZLENBQUM7U0FDdkI7YUFBTSxJQUFJLElBQUksQ0FBQyxLQUFLLFlBQVksU0FBRyxDQUFDLFFBQVEsRUFBRTtZQUMzQyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDO1NBQzlCO0lBQ0wsQ0FBQztJQUVELElBQUksS0FBSztRQUNMLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUNsQixTQUFHLENBQUMsMEJBQTBCLEVBQUUsU0FBRyxDQUFDLHNCQUFzQjtTQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDMUUsQ0FBQztJQUVELElBQUksTUFBTTtRQUNOLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUNsQixTQUFHLENBQUMsMEJBQTBCLEVBQUUsU0FBRyxDQUFDLHNCQUFzQjtTQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDMUUsQ0FBQztJQUVELElBQUksUUFBUTtRQUNSLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUNsQixTQUFHLENBQUMsc0JBQXNCLEVBQUUsU0FBRyxDQUFDLHNCQUFzQjtTQUFDLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDN0UsQ0FBQztJQUVELElBQUksS0FBSztRQUNMLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFHLENBQUMsc0JBQXNCLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDL0QsQ0FBQztJQUVELElBQUksU0FBUztRQUNULE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFHLENBQUMsc0JBQXNCLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDbkUsQ0FBQztJQUVELElBQUksS0FBSztRQUNMLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFHLENBQUMsd0JBQXdCLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDL0QsQ0FBQztJQUVELElBQUksVUFBVTtRQUNWLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFHLENBQUMsd0JBQXdCLEVBQUUsWUFBWSxDQUFDLENBQUM7SUFDdEUsQ0FBQztJQUVELElBQUksSUFBSTtRQUNKLElBQUksSUFBSSxDQUFDLEtBQUssWUFBWSxTQUFHLENBQUMsS0FBSyxFQUFFO1lBQ2pDLE9BQU8sMkJBQW1CLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3BEO2FBQU0sSUFBSSxJQUFJLENBQUMsS0FBSyxZQUFZLFNBQUcsQ0FBQyxRQUFRLEVBQUU7WUFDM0MsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztTQUMxQjtJQUNMLENBQUM7SUFHRCxTQUFTLENBQUMsR0FBUSxFQUFFLEtBQWE7UUFDN0IsSUFBSSxJQUFJLENBQUMsS0FBSyxZQUFZLFNBQUcsQ0FBQyxRQUFRLEVBQUU7WUFDcEMsS0FBSyxNQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBRTtnQkFDdEMsSUFBSSxJQUFJLFlBQVksR0FBRyxFQUFFO29CQUNyQixPQUFRLElBQW1CLENBQUMsS0FBSyxDQUFDLENBQUM7aUJBQ3RDO2FBQ0o7U0FDSjtJQUNMLENBQUM7Q0FDSjtBQXhFRCxvQkF3RUMifQ==